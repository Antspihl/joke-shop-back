<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.10.xsd">

    <changeSet id="inser-more-users" author="mattias">
        <sql>
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test1', 'test1@gmail.com', '$2a$1234567', 'Ants', true, '1234567');
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test2', 'test2@gmail.com', '$2a$1234568', 'Pets', true, '1234568');
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test3', 'test3@gmail.com', '$2a$1234569', 'Pets', true, '1234569');
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test4', 'test4@gmail.com', '$2a$1234560', 'test', false, '1234560');
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test5', 'test5@gmail.com', '$2a$1234577', 'Ants', true, '1234577');
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test6', 'test6@gmail.com', '$2a$1234578', 'Pets', true, '1234578');
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test7', 'test7@gmail.com', '$2a$1234579', 'Pets', true, '1234579');
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test8', 'test8@gmail.com', '$2a$1234570', 'test', false, '1234570');
            INSERT INTO users (username, email, password_hash, full_name, is_admin, salt)
            VALUES ('test9', 'test9@gmail.com', '$2a$1234571', 'Peedu', false, '1234571');
        </sql>
    </changeSet>

    <changeSet id="Remove_salt_column" author="Indrek">
        <dropColumn tableName="users" columnName="salt"/>
    </changeSet>

    <changeSet id="Remove users and add useful users" author="indrek">
        <sql>
            DELETE FROM users;
            INSERT INTO users (username, email, password_hash, full_name, is_admin)
            VALUES ('Indrek', 'papa@pihl.ip', '$2a$10$bwfv0SqrA/kXkJAUUgRF9uqbchb0Fzore.mXVJG4XX98C5P8eW5kC', 'Ants Pihl', true);
            INSERT INTO users (username, email, password_hash, full_name, is_admin)
            VALUES ('Raba', 'isa@servu.mr', '$2a$10$HFfUlDn3bhJs/tYANlMG9eFa7Dh1gnETyU1pPcHp8XpC7JrGztuk6', 'Ma Soo', true);
            INSERT INTO users (username, email, password_hash, full_name, is_admin)
            VALUES ('Nele', 'ema@front.ns', '$2a$10$PTGp5BloueCvfIaDftvYGO8Pk79u8JSApYnwBm567OAbArmRo295W', 'Liis Sams', true);
            INSERT INTO users (username, email, password_hash, full_name, is_admin)
            VALUES ('user', 'user@user.ee', '$2a$10$UG4/Y5NLjwewvGfgwt68WeCvlt2lFd.VCprkIN.Bqu7NXR7MGHL9m', 'User User', false);
        </sql>
    </changeSet>

    <changeSet id="Add new table UserRole and add admins" author="indrek">
        <createTable tableName="user_role">
            <column name="user_role_id" type="SERIAL">
                <constraints primaryKey="true"/>
            </column>
            <column name="user_id" type="bigint">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_role_pk"/>
            </column>
            <column name="role_id" type="bigint">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_role_pk"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableName="user_role" baseColumnNames="user_id"
                                 constraintName="user_role_fk" referencedTableName="users"
                                 referencedColumnNames="user_id"/>
        <sql>
            INSERT INTO user_role (user_id, role_id)
            VALUES (12, 1);
            INSERT INTO user_role (user_id, role_id)
            VALUES (13, 1);
            INSERT INTO user_role (user_id, role_id)
            VALUES (14, 1);
            INSERT INTO user_role (user_id, role_id)
            VALUES (15, 2);
        </sql>
    </changeSet>
</databaseChangeLog>
